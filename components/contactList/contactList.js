const tempUsers = [
  {
    JD1728402888: {
      id: "JD1728402888",
      password: "pass123",
      user_color: "#FF0000",
      profile: {
        first_name: "John",
        last_name: "Doe",
        initials: "JD",
        email: "john.doe@example.com",
        phone: "123456789",
      },
    },
    AS1728402888: {
      id: "AS1728402888",
      password: "secret456",
      user_color: "#0000FF",
      profile: {
        first_name: "Alice",
        last_name: "Smith",
        initials: "AS",
        email: "alice.smith@example.com",
        phone: "987654321",
      },
    },
    BJ1728402888: {
      id: "BJ1728402888",
      password: "mypassword789",
      user_color: "#008000",
      profile: {
        first_name: "Bob",
        last_name: "Johnson",
        initials: "BJ",
        email: "bob.johnson@example.com",
        phone: "456123789",
      },
    },
    EW1728402888: {
      id: "EW1728402888",
      password: "supersecret",
      user_color: "#FFFF00",
      profile: {
        first_name: "Eve",
        last_name: "Williams",
        initials: "EW",
        email: "eve.williams@example.com",
        phone: "789456123",
      },
    },
    MB1728402888: {
      id: "MB1728402888",
      password: "baum789",
      user_color: "#654321",
      profile: {
        first_name: "Mark",
        last_name: "Brown",
        initials: "MB",
        email: "mark.brown@example.com",
        phone: "741852963",
      },
    },
    LG1728402888: {
      id: "LG1728402888",
      password: "mypassword123",
      user_color: "#FFA500",
      profile: {
        first_name: "Linda",
        last_name: "Green",
        initials: "LG",
        email: "linda.green@example.com",
        phone: "321987654",
      },
    },
    DP1728402888: {
      id: "DP1728402888",
      password: "mypassword456",
      user_color: "#00FFFF",
      profile: {
        first_name: "David",
        last_name: "Harris",
        initials: "DP",
        email: "david.harris@example.com",
        phone: "654321987",
      },
    },
    HR1728402888: {
      id: "HR1728402888",
      password: "mypassword789",
      user_color: "#800080",
      profile: {
        first_name: "Helen",
        last_name: "Adams",
        initials: "HR",
        email: "helen.adams@example.com",
        phone: "987123456",
      },
    },
    TF1728402888: {
      id: "TF1728402888",
      password: "mypassword101",
      user_color: "#FFC0CB",
      profile: {
        first_name: "Thomas",
        last_name: "Clark",
        initials: "TF",
        email: "thomas.clark@example.com",
        phone: "852369741",
      },
    },
    SY1728402888: {
      id: "SY1728402888",
      password: "mypassword102",
      user_color: "#C0C0C0",
      profile: {
        first_name: "Sophia",
        last_name: "Young",
        initials: "SY",
        email: "sophia.young@example.com",
        phone: "159753486",
      },
    },
    ZK1728402888: {
      id: "ZK1728402888",
      password: "mypassword103",
      user_color: "#FFD700",
      profile: {
        first_name: "Zoe",
        last_name: "Kim",
        initials: "ZK",
        email: "zoe.kim@example.com",
        phone: "321654987",
      },
    },
    AL1728402888: {
      id: "AL1728402888",
      password: "mypassword104",
      user_color: "#FF69B4",
      profile: {
        first_name: "Angela",
        last_name: "Lee",
        initials: "AL",
        email: "angela.lee@example.com",
        phone: "654987321",
      },
    },
    RN1728402888: {
      id: "RN1728402888",
      password: "mypassword105",
      user_color: "#A52A2A",
      profile: {
        first_name: "Ryan",
        last_name: "Nguyen",
        initials: "RN",
        email: "ryan.nguyen@example.com",
        phone: "789321456",
      },
    },
    PT1728402888: {
      id: "PT1728402888",
      password: "mypassword106",
      user_color: "#8B0000",
      profile: {
        first_name: "Paula",
        last_name: "Taylor",
        initials: "PT",
        email: "paula.taylor@example.com",
        phone: "963258741",
      },
    },
    GW1728402888: {
      id: "GW1728402888",
      password: "mypassword107",
      user_color: "#228B22",
      profile: {
        first_name: "George",
        last_name: "Wilson",
        initials: "GW",
        email: "george.wilson@example.com",
        phone: "321789654",
      },
    },
    MW1728402888: {
      id: "MW1728402888",
      password: "mypassword108",
      user_color: "#4169E1",
      profile: {
        first_name: "Mia",
        last_name: "Hall",
        initials: "MW",
        email: "mia.hall@example.com",
        phone: "654321789",
      },
    },
    KL1728402888: {
      id: "KL1728402888",
      password: "mypassword109",
      user_color: "#20B2AA",
      profile: {
        first_name: "Kevin",
        last_name: "Roberts",
        initials: "KL",
        email: "kevin.roberts@example.com",
        phone: "987321654",
      },
    },
    SR1728402888: {
      id: "SR1728402888",
      password: "mypassword110",
      user_color: "#00008B",
      profile: {
        first_name: "Samuel",
        last_name: "Walker",
        initials: "SR",
        email: "samuel.walker@example.com",
        phone: "456789123",
      },
    },
    JN1728402888: {
      id: "JN1728402888",
      password: "mypassword111",
      user_color: "#8A2BE2",
      profile: {
        first_name: "Jessica",
        last_name: "Nelson",
        initials: "JN",
        email: "jessica.nelson@example.com",
        phone: "321456987",
      },
    },
    TB1728402888: {
      id: "TB1728402888",
      password: "mypassword112",
      user_color: "#DC143C",
      profile: {
        first_name: "Tim",
        last_name: "Baker",
        initials: "TB",
        email: "tim.baker@example.com",
        phone: "654789321",
      },
    },
  },
];

let sortedUsersArray = sortUsers();
let groupedUsersObj = groupedUsers();

// console.log(sortedUsersArray);
// console.log(groupedUsersObj);

function sortUsers() {
  let sortedUsersArray = Object.values(tempUsers[0]); // https://www.w3schools.com/jsref/jsref_object_values.asp
  sortedUsersArray.sort((userA, userB) => {
    // console.log(userA.profile.last_name, userB.profile.last_name);
    // https://www.w3schools.com/js/js_array_sort.asp
    const lastNameA = userA.profile.last_name.toLowerCase();
    const lastNameB = userB.profile.last_name.toLowerCase();
    return lastNameA.localeCompare(lastNameB, "de"); // https://www.w3schools.com/jsref/jsref_localecompare.asp
  });
  return sortedUsersArray;
}

function groupedUsers() {
  let groupedUsersObjekt = {};
  sortedUsersArray.forEach((user) => {
    // console.log(user);
    const firstLetter = user.profile.last_name[0].toUpperCase(); // Get the first letter of the last name and convert it to uppercase
    if (!groupedUsersObjekt[firstLetter]) {
      groupedUsersObjekt[firstLetter] = []; // Create an empty array for the first letter if it doesn't exist
    }
    groupedUsersObjekt[firstLetter].push(user); // Add the user to the array for the first letter
  });
  return groupedUsersObjekt;
}

export function renderContactList() {
  const contactListRef = document.getElementById("contactList");
  let renderList = "";
  Object.keys(groupedUsersObj).forEach((letter) => {
    // console.log(letter);
    // Object.keys() method returns an array of a given object's own property names ( A. B , C , D )
    renderList += /*html*/ `
                <div class="contactListContent">
                <span class="alphabetSection">${letter}</span>
                <hr class="horizontalLine">
                <ul>`; // Create a list of users for each letter
    groupedUsersObj[letter].forEach((user) => {
      // Loop through each user in the array for the letter
      //   console.log(user);
      renderList += /*html*/ `        
            <li class="userListItem">
                <span class="userInitials" style="background-color: ${user.user_color};" >
                    ${user.profile.first_name[0].toUpperCase()} ${user.profile.last_name[0].toUpperCase()}
                </span>
                <div class="userProfile">
                    <span>
                        ${user.profile.first_name} ${user.profile.last_name}
                    </span>             
                    <a class="usersMail" href="mailto:${user.profile.email}">${user.profile.email}</a>
                </div>
            </li>`; // Add the user to the list. Name , Last Name , Email
    });
    renderList += /*html*/ `</ul></div> `; // Close the list for the letter
  });
  contactListRef.innerHTML = renderList;
}

window.renderContactList = renderContactList;
